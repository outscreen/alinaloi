19. Интерфейс модулей, написанных на языке ассемблера с модулями, написанными на языке С.

Команды ассемблера в тексте программы на C без изменения вкл. в формируемый компилятором код. Для встроенного ассемблера разр. использовать: - машинные команды; строковые команды; - все инструкции передач управления с прямой или косвенной адресацией; - директивы описания и определения данных. Нельзя исп. директивы, управляющие его работой: ASSUME,SEGMENT,ENDS,PROC,ENDP,ORG и т.д. а также имя группы DGROUP, имена сегментов _TEXT,_STACK,_DATA и т.п. Можно ссылаться на описанные в С переменные. Группа инструкций, заключенная в фигурные скобки, не требует повторения перед каждой из них ключевого слова “asm”. 
 
#include <iostream.h>
#progme inline
asm v1 dw 10
asm v2 dw 90
void main(void)
{unsigned i;
 again:
 asm {mov ax,v2
          add  ax,v1
           push ax
           mov i,ax
         }
printf(“i=%d”,i);
if(i>190)
asm jmp  _end_
else if (i==150)
asm {
          mov ah,2
          mov dl,7
          int 21h
         }
 asm {
         pop ax
          mov v2,ax
          jmp again
         }
_end_:
puts(“конец проги”);
}